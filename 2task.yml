---
  - hosts: remote_hosts
    tasks: 

#    - name: Deleting old files if exist
#      file:
#        state: absent
#        path: /usr/local/apache2/htdocs/
#      become: true

    - name: check java version
      command: 'java -version' 
      register: checking_result

    - name: Debug java checking result
      debug:
        msg: "Result ___ {{ checking_result }} ___ "

    - name: check mvn version
      command: 'mvn -version' 
      ignore_errors: True
      register: checking_result1

    - name: Adding maven repo
      command: curl https://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo 
      register: maven_curl1
 
    - name: Adding maven repo (add content in epel-apache-maven.repo)
      blockinfile:
        create: yes
        dest: /etc/yum.repos.d/epel-apache-maven.repo
        block: |
          {{ maven_curl1 }}
      become: true

    - name: Installing maven
      yum: 
        name: apache-maven
        state: latest
      become: true

    - debug:
        msg: "MAVEN IS NOT INSTALLED. Result ___ {{ checking_result1 }} ___ "
      when: "'failed' in checking_result1"

    - name: Debug mvn checking result
      debug:
        msg: "MAVEN IS INSTALLED. Result ___ {{ checking_result1 }} ___ "
      when: "'True' in checking_result1"
